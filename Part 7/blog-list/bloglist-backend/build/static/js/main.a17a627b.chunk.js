(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{103:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),s=n(23),i=n.n(s),l=n(22),o=n(11),u=n(6),d=n(112),j=n(113),b=n(8),h=n.n(b),O=n(13),x=n(2),p=n(50),m=n(27),f=n.n(m),v="blogUser",g=function(e){return localStorage.setItem(v,JSON.stringify(e))},y=function(){return JSON.parse(localStorage.getItem(v))},w=function(){return localStorage.removeItem(v)},N="/api/blogs",k=function(){return{headers:{Authorization:"bearer ".concat(y().token)}}},L=function(){var e=Object(O.a)(h.a.mark((function e(t,n,r){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={blog:t,id:n,comment:r},e.next=3,f.a.post("".concat(N,"/").concat(n,"/comments"),c,k());case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C={getAll:function(){return f.a.get(N).then((function(e){return e.data}))},create:function(e){return f.a.post(N,e,k()).then((function(e){return e.data}))},update:function(e,t){var n={id:e,likes:t};return f.a.put("".concat(N,"/").concat(e),n,k()).then((function(e){return e.data}))},removeBlog:function(e){return f.a.delete("".concat(N,"/").concat(e),k()).then((function(e){return e.data}))},getConfig:k,addComment:L},T={text:"",styledType:""},A=function(e,t,n){return function(){var c=Object(O.a)(h.a.mark((function c(a){return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a({type:"NOTIFICATION",text:e,styledType:t}),clearTimeout(r),r=setTimeout((function(){a({type:"HIDE_NOTIFICATION",data:{text:"",styledType:""}})}),1e3*n);case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return Object(x.a)(Object(x.a)({},e),{},{text:t.text,styledType:t.styledType});case"HIDE_NOTIFICATION":return t.data;default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_BLOGS":return t.data;case"NEW_BLOG":return[].concat(Object(p.a)(e),[t.data]);case"NEW_COMMENT":var n=t.data.id,r=e.find((function(e){return e.id===n})),c=Object(x.a)(Object(x.a)({},r),{},{comment:t.data.comment});return e.map((function(e){return e.id!==n?e:c}));case"LIKE_BLOG":var a=t.data.id,s=e.find((function(e){return e.id===a})),i=Object(x.a)(Object(x.a)({},s),{},{likes:s.likes+1});return e.map((function(e){return e.id===a?Object(x.a)(Object(x.a)({},i),{},{likes:i.likes}):e})).sort((function(e,t){return t.likes-e.likes}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.data}));default:return e}},I=n(110),S=n(114),G=n(67),_=n(109),U=n(1),R=function(e){var t=e.blogFormRef,n=Object(o.b)();return Object(U.jsxs)("div",{className:"  blogForm",children:[Object(U.jsx)("h2",{className:"text-center",children:"Create new "}),Object(U.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),t.current.toggleVisibility();var r=e.target.title.value,c=e.target.author.value,a=e.target.url.value;e.target.title.value="",e.target.author.value="",e.target.url.value="",n(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var r,c,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.create(e);case 3:r=t.sent,n({type:"NEW_BLOG",data:r}),n(A('A new blog "'.concat(e.title,'" by "').concat(e.author,'" added'),"alert-success",5)),t.next=16;break;case 8:if(t.prev=8,t.t0=t.catch(0),e.title&&e.author&&e.url){t.next=13;break}return n(A("Title, Author and URL is required","alert-danger",5)),t.abrupt("return");case 13:c=t.t0.response.data.error,a=c.split(":"),n(A("".concat(a[2]),"alert-danger",5));case 16:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}({title:r,author:c,url:a}))},children:[Object(U.jsx)(S.a.Group,{className:"shadow-lg mb-2",children:Object(U.jsx)(G.a,{label:"Title...",children:Object(U.jsx)(S.a.Control,{id:"title",type:"text",name:"title",placeholder:"Title"})})}),Object(U.jsx)(S.a.Group,{className:"shadow-lg mb-2",children:Object(U.jsx)(G.a,{label:"Author...",children:Object(U.jsx)(S.a.Control,{id:"author",type:"text",name:"author",placeholder:"Author"})})}),Object(U.jsx)(S.a.Group,{className:"shadow-lg mb-2",children:Object(U.jsx)(G.a,{label:"URL...",children:Object(U.jsx)(S.a.Control,{id:"url",type:"text",name:"url",placeholder:"url"})})}),Object(U.jsx)(_.a,{className:" shadow btn ms-5 my-2 py-2",id:"submitBtn",type:"submit",children:"CREATE"})]})]})},D=n(9),F=a.a.forwardRef((function(e,t){var n=Object(c.useState)(!1),r=Object(D.a)(n,2),a=r[0],s=r[1],i={display:a?"none":""},l={display:a?"":"none"},o=function(){s(!a)};return Object(c.useImperativeHandle)(t,(function(){return{toggleVisibility:o}})),Object(U.jsxs)("div",{className:"d-flex flex-column w-100",children:[Object(U.jsx)("div",{style:i,children:Object(U.jsx)(_.a,{className:"w-10 mb-5 py-2 ",onClick:o,children:e.buttonLabel})}),Object(U.jsxs)("div",{className:"position-relative",style:l,children:[e.children,Object(U.jsx)(_.a,{className:" btn  bg-secondary position-absolute bottom-0 end-0 text-light w-10 me-5  mb-2  py-2",onClick:o,children:"CANCEL"})]})]})}));F.displayName="Togglable";var M=F,W=function(){var e=Object(o.c)((function(e){return e.blogs})),t=Object(c.useRef)();return Object(U.jsxs)("div",{children:[Object(U.jsx)("h3",{className:"my-5",children:"Blog App"}),Object(U.jsx)(M,{buttonLabel:"Create A New Blog",ref:t,children:Object(U.jsx)(R,{blogFormRef:t})}),Object(U.jsxs)(I.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"Blogs Titles"}),Object(U.jsx)("th",{children:"Added by "})]})}),Object(U.jsx)("tbody",{children:e.length?e.map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsxs)(l.b,{to:"/blogs/".concat(e.id),children:[e.title," ",Object(U.jsxs)("strong",{className:"text white",children:["by ",e.author]})]})}),Object(U.jsx)("td",{children:Object(U.jsxs)(l.b,{to:"/users/".concat(e.user.id),children:[" ",e.user.username]})})]},e.id)})):Object(U.jsx)("tr",{children:Object(U.jsx)("td",{className:"h4",children:"No blogs exists"})})})]})]})},z=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.loggedUser})),n=Object(o.c)((function(e){return e.blogs})),r=Object(u.g)().id,c=n.find((function(e){return e.id===r})),a=Object(u.f)();if(!c||!n)return null;var s=function(t,n){e(function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.update(e,t+1);case 2:c=n.sent,r({type:"LIKE_BLOG",data:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))},i=function(t){window.confirm('Remove blog "'.concat(c.title,'" by "').concat(c.author,'"'))&&(e(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.removeBlog(e);case 2:n({type:"DELETE_BLOG",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),a("/"))};return Object(U.jsxs)("div",{className:"blogs mt-5",children:[Object(U.jsxs)("div",{className:"blog mb-5",children:[Object(U.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(U.jsxs)("h3",{children:[c.title," ",Object(U.jsx)("strong",{children:c.author})," "]}),Object(U.jsxs)("div",{children:[Object(U.jsxs)("button",{id:"like-button",className:"btn btn-success px-2 likeBtn d-flex align-items-center",onClick:function(){return s(c.id,c.likes)},children:[Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-hand-thumbs-up me-2 d-flex align-items-center ",viewBox:"0 0 16 16",children:Object(U.jsx)("path",{d:"M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"})}),"Like"]}),"Likes: ",c.likes]})]}),Object(U.jsxs)("p",{children:["Added by ",c.user.name]}),Object(U.jsx)("a",{href:c.url,target:"_blank",rel:"noreferrer",children:c.url}),Object(U.jsx)("div",{children:t.username===c.user.username&&Object(U.jsx)(_.a,{id:"delete-button",className:"btn btn-danger deleteBtn",onClick:function(){return i(c.id)},children:"Remove Blog"})})]}),Object(U.jsxs)("div",{className:"comments",children:[Object(U.jsx)("p",{children:"Comments:"}),Object(U.jsxs)(S.a,{className:"d-flex",onSubmit:function(t){t.preventDefault();var n=t.target.comment.value;t.target.comment.value="",e(function(e,t,n){return function(){var r=Object(O.a)(h.a.mark((function r(c){var a;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.addComment(t.id,e,n);case 2:a=r.sent,c({type:"NEW_COMMENT",data:a});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(c.id,c,n))},children:[Object(U.jsx)(S.a.Control,{className:"w-50 me-5",name:"comment",type:"text"}),Object(U.jsx)("button",{className:"btn btn-success",children:"Add comment"})]}),Object(U.jsxs)(I.a,{children:[Object(U.jsx)("thead",{children:Object(U.jsx)("tr",{children:Object(U.jsx)("th",{})})}),Object(U.jsx)("tbody",{children:c.comment&&c.comment.map((function(e,t){return Object(U.jsx)("tr",{children:Object(U.jsx)("td",{children:e})},t)}))})]})]})]})},H=function(){var e=Object(o.c)((function(e){return e.users})),t=Object(u.g)().id;if(!e)return null;var n=e.find((function(e){return e.id===t}));return Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{children:n.name}),Object(U.jsx)("p",{children:"Added blogs"}),Object(U.jsx)(I.a,{children:Object(U.jsx)("tbody",{children:n.blogs.length?n.blogs.map((function(e){return Object(U.jsx)("tr",{children:Object(U.jsx)("td",{children:Object(U.jsx)(l.b,{to:"/blogs/".concat(e.id),children:e.title})})},e.id)})):Object(U.jsx)("tr",{children:Object(U.jsx)("td",{className:"h4 text-primary",children:"No blogs saved yet "})})})})]})},J=function(){var e=Object(o.c)((function(e){return e.users}));return Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{children:"Users"}),Object(U.jsxs)(I.a,{children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{}),Object(U.jsx)("th",{children:"Blogs created"})]})}),Object(U.jsx)("tbody",{children:e&&e.map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)(l.b,{to:"/users/".concat(e.id),children:e.name})}),Object(U.jsxs)("td",{children:[e.blogs.length," - Blogs"]})]},e.id)}))})]})]})},V=n(111),K=n(115),P=function(){var e=Object(o.c)((function(e){return e.notification.text})),t=Object(o.c)((function(e){return e.notification.styledType}));return e?Object(U.jsx)(V.a,{className:"p-4 w-50 ".concat(t),position:"top-center",children:Object(U.jsx)(K.a,{className:"w-100",children:Object(U.jsx)(K.a.Body,{className:"p-4 h4 text-center w-100 ",children:e})})}):null},q=n(72),Q=n(116),X={login:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,X.login({username:e,password:t});case 3:c=n.sent,g(c),C.getConfig().headers.Authorization,r({type:"LOGIN",data:c}),r(A("Welcome, ".concat(e),"alert-success",2)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r(A("Wrong username or password","alert-danger",2));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER":case"LOGIN":case"LOG_OUT":return t.data;default:return e}},$=function(){var e=Object(o.b)(),t=Object(c.useState)(!1),n=Object(D.a)(t,2),r=n[0],a=n[1],s=function(){var t=Object(O.a)(h.a.mark((function t(n){var r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,n.target.username.value;case 3:return r=t.sent,t.next=6,n.target.password.value;case 6:c=t.sent,e(Y(r,c)),n.target.username.value="",n.target.password.value="";case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:" row d-flex align-content-center  vh-100 form-container w-50 m-auto",children:[Object(U.jsx)(_.a,{style:{width:"30rem"},onClick:function(){return a(!r)},"aria-controls":"example-collapse-text","aria-expanded":r,className:"shadow w-25",children:"click"}),Object(U.jsx)("div",{style:{minHeight:"150px"},children:Object(U.jsx)(q.a,{in:r,dimension:"width",children:Object(U.jsx)("div",{id:"example-collapse-text",children:Object(U.jsxs)(Q.a,{className:"shadow",body:!0,style:{width:"25rem"},children:[Object(U.jsxs)("h4",{children:["To login to application use: ",Object(U.jsx)("br",{})]}),"Username: Test User ",Object(U.jsx)("br",{}),"Password: secret"]})})})}),Object(U.jsx)("h2",{className:"mb-5 text ",children:"Log in to application"}),Object(U.jsxs)(S.a,{onSubmit:s,className:"form-container",children:[Object(U.jsx)(S.a.Group,{className:"mb-5",controlId:"formBasicEmail",children:Object(U.jsx)(G.a,{label:"Username",className:"mb-3",children:Object(U.jsx)(S.a.Control,{type:"text",name:"username",placeholder:"Test User",autoComplete:"username"})})}),Object(U.jsx)(S.a.Group,{className:"mb-3",children:Object(U.jsx)(G.a,{label:"Password",className:"mb-3",children:Object(U.jsx)(S.a.Control,{type:"password",name:"password",placeholder:"secret",autoComplete:"current-password"})})}),Object(U.jsx)(_.a,{variant:"outline-primary",size:"lg",className:"shadow w-100 py-3",id:"loginBtn",type:"submit",children:"LOGIN"})]})]})})},ee=function(){return f.a.get("/api/users").then((function(e){return e.data}))},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_USERS":return t.data;default:return e}},ne=(n(103),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.loggedUser})),n=Object(o.c)((function(e){return e.blogs}));Object(c.useEffect)((function(){e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAll();case 2:n=e.sent,t({type:"ALL_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:n=e.sent,t({type:"ALL_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,t({type:"LOAD_USER",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n.length]);return Object(U.jsxs)("div",{children:[t&&Object(U.jsxs)(d.a,{className:"p-4",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(U.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(U.jsx)(d.a.Collapse,{id:"responsive-navbar-nav",children:Object(U.jsxs)(j.a,{className:"px-5",children:[Object(U.jsx)(j.a.Link,{href:"#",as:"span",children:Object(U.jsx)(l.b,{className:" text-white h5 me-5",to:"/",children:"BLOGS"})}),Object(U.jsx)(j.a.Link,{href:"#",as:"span",children:Object(U.jsx)(l.b,{className:" text-white h5",to:"/users",children:"USERS"})})]})}),Object(U.jsxs)("div",{className:"text-white h5 me-5",children:[Object(U.jsxs)("span",{className:"me-5",children:[t.name," Logged in"]}),Object(U.jsx)("button",{className:"btn btn-success ms-2",onClick:function(){e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=w(),t({type:"LOG_OUT",data:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.location.href="/"},children:"Logout"})]})]}),Object(U.jsx)(P,{}),Object(U.jsx)("div",{className:"container ",children:Object(U.jsxs)(u.c,{children:[Object(U.jsx)(u.a,{path:"/blogs/:id",element:Object(U.jsx)(z,{})}),Object(U.jsx)(u.a,{path:"/users/:id",element:Object(U.jsx)(H,{})}),Object(U.jsx)(u.a,{path:"/users",element:null===t?Object(U.jsx)($,{}):Object(U.jsx)(J,{})}),Object(U.jsx)(u.a,{path:"/login",element:Object(U.jsx)($,{})}),Object(U.jsx)(u.a,{path:"/",element:null===t?Object(U.jsx)($,{}):Object(U.jsx)(W,{})})]})})]})}),re=n(41),ce=n(71),ae=n(70),se=Object(re.combineReducers)({notification:E,blogs:B,loggedUser:Z,users:te}),ie=Object(re.createStore)(se,Object(ae.composeWithDevTools)(Object(re.applyMiddleware)(ce.a)));i.a.render(Object(U.jsx)(l.a,{children:Object(U.jsx)(o.a,{store:ie,children:Object(U.jsx)(ne,{})})}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.a17a627b.chunk.js.map